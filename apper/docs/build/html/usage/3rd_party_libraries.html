

<!DOCTYPE html>
<html class="writer-html5" lang="en" xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title></title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Commands" href="../sample/commands.html" />
    <link rel="prev" title="Existing Projects" href="existing.html" /> 

<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor msdt:dt="string">Jack McCutchan</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor>
<mso:Order msdt:dt="string">475400.000000000</mso:Order>
<mso:ComplianceAssetId msdt:dt="string"></mso:ComplianceAssetId>
<mso:SharedWithUsers msdt:dt="string"></mso:SharedWithUsers>
<mso:_ExtendedDescription msdt:dt="string"></mso:_ExtendedDescription>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author msdt:dt="string">Jack McCutchan</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author>
<mso:TriggerFlowInfo msdt:dt="string"></mso:TriggerFlowInfo>
<mso:ContentTypeId msdt:dt="string">0x0101009424942A026AC940BC43E33A15F21AE2</mso:ContentTypeId>
<mso:_SourceUrl msdt:dt="string"></mso:_SourceUrl>
<mso:_SharedFileIndex msdt:dt="string"></mso:_SharedFileIndex>
<mso:MediaLengthInSeconds msdt:dt="string"></mso:MediaLengthInSeconds>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home" alt="Documentation Home"> apper
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Intro</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="existing.html">Existing Projects</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">3rd Party Libraries</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-3rd-party-libraries-with-fusion-360-add-ins">Using 3rd Party Libraries with Fusion 360 Add-ins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-lib-import-class">The lib_import class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sample/commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sample/events.html">Events</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../apper.html">Developer Interface</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">apper</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>3rd Party Libraries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/usage/3rd_party_libraries.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rd-party-libraries">
<h1>3rd Party Libraries<a class="headerlink" href="#rd-party-libraries" title="Permalink to this headline">¶</a></h1>
<p>There is an included helper class to use 3rd party libraries in a reasonably “safe” way.</p>
<div class="section" id="using-3rd-party-libraries-with-fusion-360-add-ins">
<h2>Using 3rd Party Libraries with Fusion 360 Add-ins<a class="headerlink" href="#using-3rd-party-libraries-with-fusion-360-add-ins" title="Permalink to this headline">¶</a></h2>
<p>Because Fusion 360 uses its own internal python runtime for the execution of add-ins there
are some unique challenges to using 3rd party libraries.</p>
<p>Especially when those libraries have dependancies on other additional libraries.  For example,
<a class="reference external" href="https://requests.readthedocs.io/en/master/">Requests</a> actually requires a number of other libraries.
These libraries are expecting each other to also be in the sys.path of the currently running python interpreter.
So it is not sufficient to simply install Requests to a project subdirectory and use a relative import,
since even though you have imported requests,
modules within requests will attempt to directly import other modules that requests installed as dependencies.</p>
<dl class="simple">
<dt>Here is one method that can be used to deal with these issues:</dt><dd><ol class="arabic simple">
<li><p>Install the library to a subdirectory of your project such as ‘lib’</p></li>
<li><p>Temporarily add the location of that directory to your system path</p></li>
<li><p>Import the required package</p></li>
<li><p>Use the package</p></li>
<li><p>Remove the location from the system path</p></li>
</ol>
</dd>
</dl>
</div>
<div class="section" id="the-lib-import-class">
<h2>The lib_import class<a class="headerlink" href="#the-lib-import-class" title="Permalink to this headline">¶</a></h2>
<p>There is a decorator class in <a class="reference internal" href="../apper.html#module-apper.Fusion360Utilities" title="apper.Fusion360Utilities"><code class="xref py py-mod docutils literal notranslate"><span class="pre">Fusion360Utilities</span></code></a> called: <a class="reference internal" href="../apper.html#apper.Fusion360Utilities.lib_import" title="apper.Fusion360Utilities.lib_import"><code class="xref py py-class docutils literal notranslate"><span class="pre">lib_import</span></code></a>
that will simplify this process for you.</p>
<dl class="py class">
<dt>
<em class="property">class </em><code class="sig-prename descclassname">apper.</code><code class="sig-name descname">lib_import</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">app_path</span></em>, <em class="sig-param"><span class="n">library_folder</span><span class="o">=</span><span class="default_value">'lib'</span></em><span class="sig-paren">)</span></dt>
<dd><p>The lib_import class is a wrapper class to allow temporary import of a local library directory</p>
<p>By default it assumes there is a folder named ‘lib’ in the add-in root directory.</p>
<p>First install a 3rd party library (such as requests) to this directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assuming you are in the add-in root directory (sudo may not be required...)</span>
sudo python3 -m pip install -t ./lib requests
</pre></div>
</div>
<p>Then you can temporarily import the library before making a call to the requests function.
To do this use the <em>&#64;apper.lib_import(…)</em> decorator on a function that uses the library.</p>
<p>Here is an example function for using <a class="reference external" href="https://requests.readthedocs.io/en/master/">Requests</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@apper</span><span class="o">.</span><span class="n">lib_import</span><span class="p">(</span><span class="n">config</span><span class="o">.</span><span class="n">app_path</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">make_request</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="p">):</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app_path</strong> (<em>str</em>) – The root path of the addin.  Should be dynamically calculated.</p></li>
<li><p><strong>library_folder</strong> (<code class="xref py py-obj docutils literal notranslate"><span class="pre">str</span></code>, optional) – Library folder name (relative to app root). Defaults to ‘lib’</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../sample/commands.html" class="btn btn-neutral float-right" title="Commands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="existing.html" class="btn btn-neutral float-left" title="Existing Projects" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, Patrick Rainsberry

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>